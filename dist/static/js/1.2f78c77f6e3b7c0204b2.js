webpackJsonp([1],{"2ZEU":function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=t("mvHQ"),n=t.n(r),o={data:function(){return{ruleForm:{phone:"",code:""},sendText:"发送验证码",sendDisable:!1,rules:{phone:[{required:!0,message:"账号不能为空",trigger:"blur"}],code:[{required:!0,message:"验证码不能为空",trigger:"blur"}]}}},methods:{login:function(){var e=this,s={phone:this.ruleForm.phone,code:this.ruleForm.code,mode:"sms"};s=n()(s),this.$ajax.post("/hmu/user/login?param="+encodeURIComponent(s)).then(function(s){if(0===s.result){if(s.data.isNew)return void e.$router.push({name:"resign",query:{phone:e.phone}});console.log("sssss"),sessionStorage.setItem("TOKEN",s.data.token),sessionStorage.setItem("stuId",s.data.stuId),e.$router.push({name:"defaultPage"})}else e.$message({type:"error",message:s.errMsg})}).catch(function(s){e.$message({type:"error",message:s})})},sendCode:function(){var e=this;new RegExp(/^1\d{10}$/).test(this.ruleForm.phone)?this.$ajax.post("/hmu/user/sendsms?phone="+this.ruleForm.phone).then(function(s){0===s.result?e.changeSendText():e.$message({type:"error",message:s.errMsg})}):this.$message({type:"error",message:"手机号格式错误"})},changeSendText:function(){var e=this,s=60;this.sendDisable=!0;var t=setInterval(function(){e.sendText=s--+"秒后重发",-1===s&&(e.sendText="发送验证码",e.sendDisable=!1,window.clearInterval(t))},1e3)}}},a={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"login"},[t("div",{staticClass:"mask"}),e._v(" "),t("div",{staticClass:"main-content"},[t("div",{staticClass:"main-header"},[t("h1",{staticClass:"caption"},[e._v("考试查询系统登录")]),e._v(" "),t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px",size:"large"}},[t("el-form-item",{attrs:{prop:"phone","label-width":"0"}},[t("el-input",{attrs:{placeholder:"请输入手机号","prefix-icon":"el-icon-user"},model:{value:e.ruleForm.phone,callback:function(s){e.$set(e.ruleForm,"phone",s)},expression:"ruleForm.phone"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"code","label-width":"0"}},[t("div",{staticClass:"send-code"},[t("el-input",{attrs:{placeholder:"请输入验证码","prefix-icon":"el-icon-lock",type:"code"},model:{value:e.ruleForm.code,callback:function(s){e.$set(e.ruleForm,"code",s)},expression:"ruleForm.code"}}),e._v(" "),t("el-button",{attrs:{size:"small",type:"primary",disabled:e.sendDisable},on:{click:e.sendCode}},[e._v(e._s(e.sendText))])],1)])],1),e._v(" "),t("el-button",{attrs:{type:"primary",round:""},on:{click:e.login}},[e._v("登录")])],1)])])},staticRenderFns:[]};var i=t("VU/8")(o,a,!1,function(e){t("tng3")},"data-v-a245488a",null);s.default=i.exports},mvHQ:function(e,s,t){e.exports={default:t("qkKv"),__esModule:!0}},qkKv:function(e,s,t){var r=t("FeBl"),n=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}},tng3:function(e,s){}});
//# sourceMappingURL=1.2f78c77f6e3b7c0204b2.js.map