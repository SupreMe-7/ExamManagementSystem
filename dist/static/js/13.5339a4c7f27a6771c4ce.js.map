{"version":3,"sources":["webpack:///src/view/rightCon/paperMaintenance/subPage/setStudent.vue","webpack:///./src/view/rightCon/paperMaintenance/subPage/setStudent.vue?7f32","webpack:///./src/view/rightCon/paperMaintenance/subPage/setStudent.vue"],"names":["setStudent","data","allLoading","tableData","checkedStu","row","watch","this","getStudentMsg","methods","goBack","$router","push","name","_this","$ajax","post","grade","type","then","res","result","$message","message","getCheckedStu","catch","err","_this2","get","examName","forEach","item","i","length","stuId","toggleSelection","handleSelectionChange","val","console","log","rows","_this3","$refs","multipleTable","toggleRowSelection","clearSelection","setStu","_this4","postData","obj","beforeRouteEnter","to","from","next","vm","params","_data","subPage_setStudent","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","content","on","back","_v","staticStyle","margin-top","size","click","$event","directives","rawName","value","expression","ref","width","header-cell-style","background","row-style","height","selection-change","align","label","prop","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/13.5339a4c7f27a6771c4ce.js","sourcesContent":["<template>\n  <div class=\"set-stu\">\n    <el-page-header\n      @back=\"goBack\"\n      :content=\"row.examName + '安排考试学生'\"\n    ></el-page-header>\n    <div style=\"margin-top: 20px\">\n      <el-button @click=\"toggleSelection()\" size=\"small\">清空选择</el-button>\n      <el-button @click=\"setStu\" size=\"small\" type=\"primary\">保存</el-button>\n    </div>\n    <el-row class=\"student-table\" v-loading=\"allLoading\">\n      <el-table\n        ref=\"multipleTable\"\n        :data=\"tableData\"\n        style=\"width: 100%\"\n        :header-cell-style=\"{ background: 'rgb(235,244,248)' }\"\n        :row-style=\"{ background: 'rgb(240,248,250)' }\"\n        size=\"small\"\n        height=\"500px\"\n        @selection-change=\"handleSelectionChange\"\n      >\n        <el-table-column type=\"selection\" width=\"55\" align=\"center\">\n        </el-table-column>\n        <el-table-column\n          label=\"学号\"\n          width=\"200\"\n          prop=\"stuId\"\n          align=\"center\"\n        ></el-table-column>\n        <el-table-column\n          label=\"姓名\"\n          width=\"200\"\n          prop=\"name\"\n          align=\"center\"\n        ></el-table-column>\n        <el-table-column\n          label=\"类别\"\n          width=\"200\"\n          prop=\"type\"\n          align=\"center\"\n        ></el-table-column>\n        <el-table-column\n          label=\"入学年份\"\n          width=\"200\"\n          prop=\"grade\"\n          align=\"center\"\n        ></el-table-column>\n        <el-table-column label=\"联系方式\" prop=\"phone\"></el-table-column>\n      </el-table>\n    </el-row>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      allLoading: false,\n      tableData: [],\n      checkedStu: [],\n      row: {}\n    };\n  },\n  watch: {\n    row() {\n      this.getStudentMsg();\n    }\n  },\n  methods: {\n    goBack() {\n      this.$router.push({ name: 'paperMaintenance' });\n    },\n    getStudentMsg() {\n      this.allLoading = true;\n      this.$ajax\n        .post('/hmu/tea/getStudents', {\n          grade: this.row.grade,\n          type: this.row.type\n        })\n        .then(res => {\n          if (!res.result) {\n            this.tableData = res.data;\n            this.getCheckedStu();\n          } else {\n            this.$message({\n              type: 'error',\n              message: '获取学生列表失败, 请刷新重试'\n            });\n          }\n        })\n        .catch(err => {\n          this.$message({\n            type: 'error',\n            message: err\n          });\n        });\n    },\n    getCheckedStu() {\n      this.allLoading = true;\n      this.$ajax\n        .get(`/hmu/tea/getGradeByExam/${this.row.examName}`)\n        .then(res => {\n          if (!res.result) {\n            this.tableData.forEach(item => {\n              for (let i = 0; i < res.data.length; i++) {\n                if (item.stuId === res.data[i].stuId) {\n                  this.checkedStu.push(item);\n                }\n              }\n            });\n            this.toggleSelection(this.checkedStu);\n            this.allLoading = false;\n          } else {\n            this.$message({\n              type: 'error',\n              message: '获取考试学生失败！'\n            });\n            this.allLoading = false;\n          }\n        })\n        .catch(err => {\n          this.$message({\n            type: 'error',\n            message: err\n          });\n        });\n    },\n    handleSelectionChange(val) {\n      this.checkedStu = val;\n      console.log(this.checkedStu);\n    },\n    // 标记已选学生\n    toggleSelection(rows) {\n      if (rows) {\n        rows.forEach(row => {\n          this.$refs.multipleTable.toggleRowSelection(row);\n        });\n      } else {\n        this.$refs.multipleTable.clearSelection();\n      }\n    },\n    setStu() {\n      let postData = [];\n      this.checkedStu.forEach(item => {\n        let obj = {\n          stuId: item.stuId,\n          examName: this.row.examName\n        };\n        postData.push(obj);\n      });\n      this.$ajax\n        .post('/hmu/tea/insertStuToExam', postData)\n        .then(res => {\n          if (!res.result) {\n            this.$message({\n              type: 'success',\n              message: '安排考试学生成功！'\n            });\n            this.goBack();\n          } else {\n            this.$message({\n              type: 'error',\n              message: '安排考试学生失败！'\n            });\n          }\n        })\n        .catch(err => {\n          this.$message({\n            type: 'error',\n            message: err\n          });\n        });\n    }\n  },\n  beforeRouteEnter(to, from, next) {\n    next(vm => {\n      if (to.params.row) {\n        vm._data.row = to.params.row;\n      }\n    });\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.set-stu {\n  .student-table {\n    padding: 20px 0 0 0;\n    .pagination {\n      margin-top: 30px;\n      text-align: center;\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/view/rightCon/paperMaintenance/subPage/setStudent.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"set-stu\"},[_c('el-page-header',{attrs:{\"content\":_vm.row.examName + '安排考试学生'},on:{\"back\":_vm.goBack}}),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"20px\"}},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.toggleSelection()}}},[_vm._v(\"清空选择\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.setStu}},[_vm._v(\"保存\")])],1),_vm._v(\" \"),_c('el-row',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.allLoading),expression:\"allLoading\"}],staticClass:\"student-table\"},[_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"header-cell-style\":{ background: 'rgb(235,244,248)' },\"row-style\":{ background: 'rgb(240,248,250)' },\"size\":\"small\",\"height\":\"500px\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"学号\",\"width\":\"200\",\"prop\":\"stuId\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"姓名\",\"width\":\"200\",\"prop\":\"name\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"类别\",\"width\":\"200\",\"prop\":\"type\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"入学年份\",\"width\":\"200\",\"prop\":\"grade\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"联系方式\",\"prop\":\"phone\"}})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-24b5825b\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/rightCon/paperMaintenance/subPage/setStudent.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-24b5825b\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./setStudent.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./setStudent.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./setStudent.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-24b5825b\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./setStudent.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-24b5825b\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/rightCon/paperMaintenance/subPage/setStudent.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}