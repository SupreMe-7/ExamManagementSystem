webpackJsonp([2],{"7iM4":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mvHQ"),s=a.n(l),r=a("Dd8w"),i=a.n(r),n=a("NYxO"),o={data:function(){return{loading:!1,dialogVisible:!1,dialogType:"",type:"",grade:"",department:"",turn:"",testStatus:"",currentPage:1,tableData:[],addPaperData:{grade:"",type:"",department:"",turn:"",examTime:""}}},computed:i()({},Object(n.c)({typeList:"typeList",gradeList:"gradeList",courseNameList:"courseNameList",roundList:"roundList"})),methods:{checkPaper:function(e,t){e&&"已考"===t.testStatus||this.$router.push({name:"aePaper",params:{examMsg:t,paperType:e}})},addPaperDialog:function(){this.dialogType="add",this.dialogVisible=!0},canelAdd:function(){this.addPaperData={grade:"",type:"",department:"",turn:"",examTime:""}},addPaper:function(){var e=this;"check"!==this.dialogType?("number"!=typeof this.addPaperData.examTime&&(this.addPaperData.examTime=new Date(this.addPaperData.examTime),this.addPaperData.examTime=this.addPaperData.examTime.getTime()),(new Date).getTime()>this.addPaperData.examTime?this.$message({type:"error",message:"考试时间请选择在当前时间之后！"}):("edit"===this.dialogType&&this.$ajax.put("/hmu/tea/updateExam",this.addPaperData).then(function(t){t.result?e.$message({type:"error",message:"更新考试时间失败！"}):(e.$message({type:"success",message:"更新考试时间成功！"}),e.dialogVisible=!1,e.getPaperData())}).catch(function(t){e.$message({type:"error",message:t})}),"add"===this.dialogType&&this.$ajax.post("/hmu/tea/insertExam",this.addPaperData).then(function(t){t.result?e.$message({type:"error",message:"创建考试失败！"}):(e.$message({type:"success",message:"创建考试成功！"}),e.dialogVisible=!1,e.getPaperData())}).catch(function(t){e.$message({type:"error",message:t})}))):this.dialogVisible=!1},checkTest:function(e){this.dialogType="check",this.addPaperData=e,this.dialogVisible=!0},editTest:function(e){"已考"!==e.testStatus&&(this.dialogType="edit",this.addPaperData=JSON.parse(s()(e)),this.dialogVisible=!0)},deleteTest:function(e){var t=this;this.$confirm("此操作将永久删除该考试, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$ajax.delete("/hmu/tea/deleteExam/"+e.examName).then(function(e){e.result?t.$message({type:"error",message:"删除考试失败！"}):(t.$message({type:"success",message:"删除考试成功!"}),t.getPaperData())}).catch(function(e){t.$message({type:"error",message:e})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},setExamStu:function(e){"已考"!==e.testStatus&&this.$router.push({name:"setStu",params:{row:e}})},getPaperData:function(){var e=this;this.loading=!0,this.$ajax.post("/hmu/tea/getExams",{grade:this.grade,type:""===this.type?null:this.type,department:""===this.department?null:this.department,turn:""===this.turn?0:this.turn}).then(function(t){t.result||(t.data.forEach(function(t){new Date(t.examTime).getTime()<(new Date).getTime()?e.$set(t,"testStatus","已考"):e.$set(t,"testStatus","未考")}),e.tableData=t.data,e.loading=!1)}).catch(function(t){e.$message({type:"error",message:t})})}},mounted:function(){this.grade=(new Date).getFullYear(),this.getPaperData()}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"paper-maintenance"},[a("el-row",{staticClass:"search-bar"},[a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"专业类别",clearable:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.typeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"年级"},model:{value:e.grade,callback:function(t){e.grade=t},expression:"grade"}},e._l(e.gradeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"轮次",clearable:""},model:{value:e.turn,callback:function(t){e.turn=t},expression:"turn"}},e._l(e.roundList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"课程名称",clearable:""},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}},e._l(e.courseNameList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"试卷状态",clearable:""},model:{value:e.testStatus,callback:function(t){e.testStatus=t},expression:"testStatus"}},[a("el-option",{attrs:{label:"未考",value:"未考"}}),e._v(" "),a("el-option",{attrs:{label:"已考",value:"已考"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.getPaperData}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addPaperDialog}},[e._v("添加试卷")])],1)],1),e._v(" "),a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"paper-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":{background:"rgb(235,244,248)"},"row-style":{background:"rgb(240,248,250)"},size:"small",height:"500px"}},[a("el-table-column",{attrs:{label:"年级",width:"150",prop:"grade",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"考试类别",width:"150",prop:"type",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"课程名称",width:"150",prop:"department",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"试卷名称",width:"200",prop:"examName",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"考试时间",width:"200",prop:"examTime",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"试卷状态",width:"200",prop:"testStatus",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.checkTest(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{size:"mini",disabled:"已考"===t.row.testStatus},on:{click:function(a){return e.editTest(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.checkPaper(!1,t.row)}}},[e._v("查看试卷")]),e._v(" "),a("el-button",{attrs:{size:"mini",disabled:"已考"===t.row.testStatus},on:{click:function(a){return e.checkPaper(!0,t.row)}}},[e._v("编辑试卷")]),e._v(" "),a("el-button",{attrs:{size:"mini",disabled:"已考"===t.row.testStatus},on:{click:function(a){return e.setExamStu(t.row)}}},[e._v("安排考试学生")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteTest(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"试卷信息",visible:e.dialogVisible,width:"40%","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.canelAdd}},[a("el-row",[e._v("\n      考试年级:\n      "),a("el-select",{attrs:{placeholder:"考试年级",clearable:"",disabled:"add"!==e.dialogType},model:{value:e.addPaperData.grade,callback:function(t){e.$set(e.addPaperData,"grade",t)},expression:"addPaperData.grade"}},e._l(e.gradeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-row",[e._v("\n      专业类别:\n      "),a("el-select",{attrs:{placeholder:"专业类别",clearable:"",disabled:"add"!==e.dialogType},model:{value:e.addPaperData.type,callback:function(t){e.$set(e.addPaperData,"type",t)},expression:"addPaperData.type"}},e._l(e.typeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-row",[e._v("\n      课程名称:\n      "),a("el-select",{attrs:{placeholder:"课程名称",clearable:"",disabled:"add"!==e.dialogType},model:{value:e.addPaperData.department,callback:function(t){e.$set(e.addPaperData,"department",t)},expression:"addPaperData.department"}},e._l(e.courseNameList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-row",[e._v("\n      考试轮次:\n      "),a("el-select",{attrs:{placeholder:"考试轮次",clearable:"",disabled:"add"!==e.dialogType},model:{value:e.addPaperData.turn,callback:function(t){e.$set(e.addPaperData,"turn",t)},expression:"addPaperData.turn"}},e._l(e.roundList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-row",[e._v("\n      考试时间:\n      "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择考试日期时间",disabled:"check"===e.dialogType},model:{value:e.addPaperData.examTime,callback:function(t){e.$set(e.addPaperData,"examTime",t)},expression:"addPaperData.examTime"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addPaper}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(o,d,!1,function(e){a("yMEY")},"data-v-0418dcb2",null);t.default=c.exports},mvHQ:function(e,t,a){e.exports={default:a("qkKv"),__esModule:!0}},qkKv:function(e,t,a){var l=a("FeBl"),s=l.JSON||(l.JSON={stringify:JSON.stringify});e.exports=function(e){return s.stringify.apply(s,arguments)}},yMEY:function(e,t){}});
//# sourceMappingURL=2.ff0fdb6e4e26ac653d4b.js.map